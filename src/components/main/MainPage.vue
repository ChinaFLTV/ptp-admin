<template>

    <div class="main">

        <transition name="el-zoom-in-top">
            <TopBar v-show="isShowTopBar" ref="topBarRef"/>
        </transition>
        <el-container class="major-content">

            <transition name="el-zoom-in-bottom">
                <SideBar v-show="isShowSideBar" class="main-sideBar"/>
            </transition>
            <router-view>
            </router-view>

        </el-container>

    </div>

</template>


<script lang="ts" setup>

import SideBar from "@/components/main/SideBar.vue";
import TopBar from "@/components/main/TopBar.vue";
import {onMounted} from "vue";
import {ElMessage} from "element-plus";


const topBarRef = ref(null);


const isShowTopBar = ref(false);
const isShowSideBar = ref(false);


new Promise(resolve => {

    setTimeout(() => {

        isShowTopBar.value = true;
        resolve();

    }, 2000);

}).then(() => {

    setTimeout(() => {

        isShowSideBar.value = true;

    }, 800);

}).catch(err => {

    ElMessage.error("页面渲染错误");
    console.log(err);

});


onMounted(() => {

    // 2024-2-9  22:48-当显示此页面时，说明此时用户一定已经登录了，于是需要更新顶栏组件状态
    topBarRef.value.updateComponentStatus();


});


</script>

<style lang="scss" scoped>

.main {

  display: flex;
  flex-direction: column;
  width: 100vw;
  height: 100vh;
  background-image: url("/src/assets/image/login_background.webp");
  background-repeat: no-repeat;
  background-position: center;
  background-clip: border-box;
  background-size: cover;

  .main-sideBar {

    width: 200px;


  }

}

.major-content {

  flex: 1;
  display: flex;

}

</style>
